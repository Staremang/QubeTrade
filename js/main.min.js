"use strict";

function ready(e) {
    (document.attachEvent ? "complete" === document.readyState : "loading" !== document.readyState) ? e() : document.addEventListener("DOMContentLoaded", e);
}

function fadeIn(e) {
    e.style.opacity = 0;
    var t = +new Date();
    !function o() {
        e.style.opacity = +e.style.opacity + (new Date() - t) / 1400, t = +new Date(), +e.style.opacity < 1 && (window.requestAnimationFrame && requestAnimationFrame(o) || setTimeout(o, 16));
    }();
}

function setVideo(e) {
    document.querySelector(".section-hero__video-container").viewChecker({
        name: "1",
        os: e
    }), document.querySelector(".three-phones-container").viewChecker({
        name: "2",
        os: e
    }), document.querySelector(".three-phones-at-an-angle-video").viewChecker({
        name: "4",
        os: e
    }), document.querySelector(".horizontal-phone-video").viewChecker({
        name: "6",
        os: e
    });
}

Element.prototype.viewChecker = function(e) {
    function t(t, o) {
        t ? console.log(e.name + " - Успешно") : void 0 !== o ? console.error(e.name, o) : console.error(e.name, " - Unknown error");
    }
    function o() {
        s = !0, d.classList.contains("media-last-frame") || d.classList.add("media-last-frame"), 
        d.classList.add("media-end");
    }
    function n() {
        return d.getBoundingClientRect().top <= document.documentElement.clientHeight;
    }
    var i = !1, a = !1, s = !1, d = this;
    if (function(e) {
        e.innerHTML = "", e.classList.contains("media-last-frame") && e.classList.remove("media-last-frame"), 
        e.classList.contains("media-end") && e.classList.remove("media-end");
    }(d), function() {
        return "" !== document.getElementsByTagName("video")[0].canPlayType("video/mp4") || "" !== document.getElementsByTagName("video")[0].canPlayType("video/mp4");
    }()) {
        var c, r, m = function() {
            a = !0, l();
        }, l = function e() {
            n() && !i && (window.removeEventListener("scroll", e), window.removeEventListener("resize", e), 
            a ? (i = !0, u()) : c = setTimeout(function() {
                a || (t(!1, "Видео не загрузилось в указанный период"), r.removeEventListener("canplaythrough", m), 
                o());
            }, 8e3));
        }, u = function() {
            var e = r.play();
            clearTimeout(c), r.style.opacity = "1", r.style.visibility = "visible", setTimeout(function() {
                d.classList.add("media-last-frame");
            }, 500), r.addEventListener("ended", o), e instanceof Promise ? e.then(function() {
                t(!0);
            }).catch(function(e) {
                t(!1, e.message), o();
            }) : setTimeout(function() {
                s || (t(!1, "Видео слишком долго грузилось"), r.removeEventListener("canplaythrough", m), 
                o());
            }, 1e4);
        };
        (r = function(n) {
            var i = document.createElement("video");
            return "ios" === e.os ? (i.innerHTML += '<source src="video_ios/' + e.name + '.webm" type="video/webm">', 
            i.innerHTML += '<source src="video_ios/' + e.name + '.mp4" type="video/mp4">') : (i.innerHTML += '<source src="video_android/' + e.name + '.webm" type="video/webm">', 
            i.innerHTML += '<source src="video_android/' + e.name + '.mp4" type="video/mp4">'), 
            i.classList.add("mediaobject-element"), n.insertBefore(i, n.children[0]), i.load(), 
            i.addEventListener("error", function(e) {
                t(!1, e), o();
            }), i;
        }(d)).addEventListener("canplaythrough", m), window.addEventListener("scroll", l), 
        window.addEventListener("resize", l), l();
    } else t(!1, "Воспроизведение данного формата недоступно для вашего браузера"), 
    o();
    return this;
}, ready(function() {
    svg4everybody(), console.log("v1.14 - 07.08"), -1 !== navigator.platform.indexOf("Mac") || -1 !== navigator.platform.indexOf("iPhone") ? (document.body.classList.add("ios"), 
    document.querySelector('.header-switch__item[data-os="ios"]').classList.add("active"), 
    setVideo("ios")) : (document.body.classList.add("android"), document.querySelector('.header-switch__item[data-os="android"]').classList.add("active"), 
    setVideo("android"));
}), $(document).ready(function() {
    $(".header-switch").click(function() {
        $(".header-switch__item").removeClass("active"), document.body.classList.contains("android") ? (document.body.classList.remove("android"), 
        document.body.classList.add("ios"), document.querySelector('.header-switch__item[data-os="ios"]').classList.add("active"), 
        setVideo("ios")) : (document.body.classList.remove("ios"), document.body.classList.add("android"), 
        document.querySelector('.header-switch__item[data-os="android"]').classList.add("active"), 
        setVideo("android"));
    }), document.documentElement.clientWidth <= 768 && ($(".carousel").addClass("owl-carousel owl-theme"), 
    $(".carousel").owlCarousel({
        loop: !0,
        nav: !0,
        margin: 7,
        navText: [ "", "" ],
        responsive: {
            0: {
                items: 2
            },
            440: {
                items: 3
            },
            560: {
                items: 4
            }
        }
    }));
});