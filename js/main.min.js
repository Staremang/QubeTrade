"use strict";

function ready(e) {
    (document.attachEvent ? "complete" === document.readyState : "loading" !== document.readyState) ? e() : document.addEventListener("DOMContentLoaded", e);
}

function fadeIn(e) {
    e.style.opacity = 0;
    var t = +new Date();
    !function o() {
        e.style.opacity = +e.style.opacity + (new Date() - t) / 1400, t = +new Date(), +e.style.opacity < 1 && (window.requestAnimationFrame && requestAnimationFrame(o) || setTimeout(o, 16));
    }();
}

Element.prototype.viewChecker = function(e) {
    function t() {
        a = !0, s.classList.contains("media-last-frame") || s.classList.add("media-last-frame"), 
        s.classList.add("media-end");
    }
    function o() {
        return s.getBoundingClientRect().top <= document.documentElement.clientHeight;
    }
    var n = !1, i = !1, a = !1, s = this;
    if (function() {
        return "" !== document.getElementsByTagName("video")[0].canPlayType("video/mp4");
    }()) {
        var d = function() {
            i = !0, r();
        }, r = function a() {
            o() && !n && (window.removeEventListener("scroll", a), window.removeEventListener("resize", a), 
            i ? (n = !0, c()) : setTimeout(function() {
                i || (console.log(e, "Видео не загрузилось"), l.removeEventListener("canplaythrough", d), 
                t());
            }, 8e3));
        }, c = function() {
            var o = l.play();
            l.style.opacity = "1", l.style.visibility = "visible", s.classList.add("media-last-frame"), 
            l.addEventListener("ended", t), o instanceof Promise ? o.then(function() {
                console.log(e, "autoplay");
            }).catch(function(o) {
                console.error(e, o.message), t();
            }) : setTimeout(function() {
                a || (console.error("Не удалось воспроизвести видео"), l.removeEventListener("canplaythrough", d), 
                t());
            }, 8e3);
        }, l = document.createElement("video");
        -1 !== navigator.platform.indexOf("Mac") || -1 !== navigator.platform.indexOf("iPhone") ? l.setAttribute("src", "video_ios/" + e) : l.setAttribute("src", "video_android/" + e), 
        l.classList.add("mediaobject-element"), s.insertBefore(l, s.children[0]), l.addEventListener("error", function(o) {
            console.log(e, "Ошибка воспроизведения", o), t();
        }), l.addEventListener("canplaythrough", d), window.addEventListener("scroll", r), 
        window.addEventListener("resize", r), r();
    } else console.log("Воспроизведение данного формата недоступно для вашего браузера"), 
    t();
    return this;
}, ready(function() {
    svg4everybody(), -1 !== navigator.platform.indexOf("Mac") || -1 !== navigator.platform.indexOf("iPhone") ? (document.body.classList.add("ios"), 
    document.querySelector('.header-switch__item[data-os="ios"]').classList.add("active")) : (document.body.classList.add("android"), 
    document.querySelector('.header-switch__item[data-os="android"]').classList.add("active")), 
    document.querySelector(".section-hero__video-container").viewChecker("1.mp4"), document.querySelector(".three-phones-container").viewChecker("2.mp4"), 
    document.querySelector(".three-phones-at-an-angle-video").viewChecker("4.mp4"), 
    document.querySelector(".horizontal-phone-video").viewChecker("6.mp4");
}), $(document).ready(function() {
    $(".header-switch__item").click(function() {
        $(".header-switch__item").removeClass("active"), $(this).addClass("active"), "ios" === $(this).attr("data-os") ? ($("body").removeClass("android"), 
        $("body").addClass("ios")) : ($("body").removeClass("ios"), $("body").addClass("android"));
    }), document.documentElement.clientWidth <= 768 && ($(".carousel").addClass("owl-carousel owl-theme"), 
    $(".carousel").owlCarousel({
        loop: !0,
        nav: !0,
        margin: 7,
        navText: [ "", "" ],
        responsive: {
            0: {
                items: 2
            },
            440: {
                items: 3
            },
            560: {
                items: 4
            }
        }
    }));
});